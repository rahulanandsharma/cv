a = readim('bigsur1.jpg');
b = readim('bigsur2.jpg');
sz = imsize(a);
dipshow(1,a);   ca = dipgetcoords(1,1);
dipshow(1,b);   cb = dipgetcoords(1,1);
s = ca - cb - [sz(1),0];
z = newim(sz);
a = iterate('cat',1,a,z);
b = iterate('cat',1,z,b);
b = iterate('dip_wrap',b,s);
d = max(abs(a-b));
d(0:sz(1)-1+s(1),:) = 0;
d(sz(1):imsize(d,1)-1,:) = 0;
c = newim(d,'sint8');
c(0:sz(1)+s(1),:) = 1;
c(sz(1)-1:imsize(d,1)-1,:) = 2;
c = dip_growregions(c,d,[],1,0,'high_first');
w = c==2;
out = a;
out(w) = b(w);